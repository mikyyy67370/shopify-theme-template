{% comment %}
  Testimonials Section - Balance Intelligente
  ------------------------------------------------------------------------------
  Section présentant les avis clients et preuves sociales
{% endcomment %}

<div class="bg-gray-50 py-24 sm:py-32">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="mx-auto max-w-2xl text-center mb-16">
      <h2 
        class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"
        data-aos="fade-up"
      >
        {{ section.settings.title | default: "Ce que nos clients disent" }}
      </h2>
      <p 
        class="mt-4 text-lg text-gray-500"
        data-aos="fade-up"
        data-aos-delay="200"
      >
        {{ section.settings.subtitle | default: "Découvrez les expériences de nos clients satisfaits avec notre balance intelligente." }}
      </p>
    </div>

    <!-- Testimonials Grid -->
    <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
      {% for block in section.blocks %}
        <div 
          class="relative bg-white p-8 rounded-2xl shadow-sm"
          data-aos="fade-up"
          data-aos-delay="{{ forloop.index | times: 200 }}"
        >
          <!-- Quote Icon -->
          <div class="absolute -top-4 -left-4">
            <svg class="h-8 w-8 text-accent" fill="currentColor" viewBox="0 0 24 24">
              <path d="M4.583 17.321C3.553 16.227 3 15 3 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 01-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179zm10 0C13.553 16.227 13 15 13 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 01-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179z"/>
            </svg>
          </div>
          
          <!-- Rating Stars -->
          <div class="flex items-center mb-4">
            {% assign rating = block.settings.rating | default: 5 %}
            {% for i in (1..5) %}
              {% if i <= rating %}
                <svg class="h-5 w-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                </svg>
              {% else %}
                <svg class="h-5 w-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                </svg>
              {% endif %}
            {% endfor %}
          </div>

          <!-- Testimonial Content -->
          <blockquote class="text-gray-500 mb-6">
            {{ block.settings.content }}
          </blockquote>

          <!-- Author -->
          <div class="flex items-center">
            {% if block.settings.author_image %}
              <img 
                src="{{ block.settings.author_image | img_url: '100x100', crop: 'center' }}" 
                alt="{{ block.settings.author_name }}"
                class="h-12 w-12 rounded-full object-cover"
              >
            {% endif %}
            <div class="ml-4">
              <div class="text-base font-semibold text-gray-900">{{ block.settings.author_name }}</div>
              <div class="text-sm text-gray-500">{{ block.settings.author_title }}</div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Trust Badges -->
    <div class="mt-16">
      <h3 
        class="text-center text-lg font-semibold text-gray-900 mb-8"
        data-aos="fade-up"
      >
        {{ section.settings.trust_title | default: "Ils nous font confiance" }}
      </h3>
      
      <div 
        class="grid grid-cols-2 gap-8 md:grid-cols-6 lg:grid-cols-5"
        data-aos="fade-up"
        data-aos-delay="200"
      >
        {% for block in section.blocks %}
          {% if block.type == 'trust_badge' %}
            <div class="col-span-1 flex justify-center md:col-span-2 lg:col-span-1">
              <img 
                class="h-12 object-contain"
                src="{{ block.settings.logo | img_url: '120x' }}"
                alt="{{ block.settings.name }}"
              >
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Ce que nos clients disent"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Découvrez les expériences de nos clients satisfaits avec notre balance intelligente."
    },
    {
      "type": "text",
      "id": "trust_title",
      "label": "Trust Badges Title",
      "default": "Ils nous font confiance"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Rating",
          "default": 5
        },
        {
          "type": "textarea",
          "id": "content",
          "label": "Content"
        },
        {
          "type": "text",
          "id": "author_name",
          "label": "Author Name"
        },
        {
          "type": "text",
          "id": "author_title",
          "label": "Author Title"
        },
        {
          "type": "image_picker",
          "id": "author_image",
          "label": "Author Image"
        }
      ]
    },
    {
      "type": "trust_badge",
      "name": "Trust Badge",
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Company Name"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "blocks": [
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        }
      ]
    }
  ]
}
{% endschema %}